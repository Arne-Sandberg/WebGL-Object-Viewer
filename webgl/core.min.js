function runWebGL(e,t,r,i,a){let o=["precision mediump float;","attribute vec3 vertPosition;","attribute vec2 vertTexCoord;","attribute vec3 vertNormal;","varying vec2 fragTexCoord;","varying vec3 fragNormal;","uniform mat4 mWorld;","uniform mat4 mView;","uniform mat4 mProj;","void main() {","fragTexCoord = vertTexCoord;","fragNormal = (mWorld * vec4(vertNormal, 0.0)).xyz;","gl_Position = mProj * mView * mWorld * vec4(vertPosition, 1.0);","}"].join(""),n=["precision mediump float;","struct directionalLight {","vec3 direction;","vec3 color;};","varying vec2 fragTexCoord;","varying vec3 fragNormal;","uniform vec3 ambientLightIntensity;","uniform directionalLight sun;","uniform sampler2D sampler;","void main() {","vec3 surfaceNormal = normalize(fragNormal);","vec3 normSunDir = normalize(sun.direction);","vec4 texel = texture2D (sampler, fragTexCoord);","vec3 lightIntensity = ambientLightIntensity + sun.color * max(dot(fragNormal, normSunDir), 0.0);","gl_FragColor = vec4(texel.rgb * lightIntensity, texel.a);","}"].join("");loadFile(e,function(e,l){if(e)console.error("Error getting mesh! "+e);else{let e=l.meshes[0].vertices,s=[].concat.apply([],l.meshes[0].faces),u=l.meshes[0].texturecoords[0],m=l.meshes[0].normals;loadFile(t,function(l,c){l?console.error("Error getting mesh Albedo/Diffuse! "+l):(t=c,loadFile(r,function(e,t){e?console.error("Error getting mesh Normal/Bump map! "+e+" Skipping..."):r=t}),loadFile(i,function(e,t){e?console.error("Error getting mesh Specual/Metallic map! Skipping..."+e+" Skipping..."):i=t}),loadFile(a,function(e,t){e?console.error("Error getting mesh Glossy/Roughness map! Skipping..."+e+" Skipping..."):a=t}),execWebGL(o,n,e,s,u,m,t,r,i,a))})}})}function loadFile(e,t){if(e.match(/\.(json|obj|dae|blend|fbx|3ds|max)/g)){let r=new XMLHttpRequest;r.open("GET",e+"?"+Math.random(),!0),e.match(/\.(json|obj|dae)/g)?(r.setRequestHeader("Content-Type","text/plain"),r.onload=function(){r.status<200||r.status>299?t("Error: Status "+r.status+" on resource "+e):t(null,JSON.parse(r.responseText))}):e.match(/\.(blend|fbx|3ds|max)/g)&&(r.responseType="arraybuffer",r.onload=function(){r.status<200||r.status>299?t("Error: Status "+r.status+" on resource "+e):t(null,r.response)}),r.send()}else if(e.match(/\.(jpg|jpeg|png|bmp|gif)/g)){let r=new Image;r.onload=function(){t(null,r)},r.src=e}else t("Unreconginzed file format!")}function execWebGL(e,t,r,i,a,o,n,l,s,u){function m(e,t,r,i,a){clearTimeout(a),document.getElementsByClassName("notyTitle")[0].innerText=e,document.getElementsByClassName("notification")[0].style.animation="fadein "+t+"s",document.getElementsByClassName("notification")[0].style.background=r,document.getElementsByClassName("notification")[0].style.borderBottom="1px solid"+d(r,i),a=setTimeout(function(){document.getElementsByClassName("notification")[0].style.animation=null},1e3*t)}function c(e,t,r,i){"visible"!==document.getElementsByClassName("modal")[0].style.visibility?(document.getElementsByClassName("modal")[0].style.visibility="visible",document.getElementsByClassName("modal")[0].style.opacity=1,document.getElementsByClassName("modalTitle")[0].innerText=e,document.getElementsByClassName("modalTitle")[0].style.background=r,document.getElementsByClassName("modalTitle")[0].style.borderBottom="1px solid"+d(r,i),document.getElementsByClassName("modalContent")[0].innerHTML=t):(document.getElementsByClassName("modal")[0].style.visibility="hidden",document.getElementsByClassName("modal")[0].style.opacity=0,document.getElementsByClassName("modalTitle")[0].innerText=null,document.getElementsByClassName("modalContent")[0].innerHTML=null)}function d(e,t){e.match(/#/g)&&(e=e.replace("#",""));let r=parseInt(e,16),i=Math.round(2.55*t),a=(r>>16)+i,o=(r>>8&255)+i,n=(255&r)+i;return"#"+(16777216+65536*(a<255?a<1?0:a:255)+256*(o<255?o<1?0:o:255)+(n<255?n<1?0:n:255)).toString(16).slice(1)}let g=document.getElementsByClassName("viewport")[0],f=g.getContext("webgl");f||(console.log("WebGL is not supported, trying Experimental WebGL..."),(f=g.getContext("experimental-webgl"))?console.log("loaded Experimental WebGL!"):alert("Couldn't initialize WebGL, this might be because your browser doesn't support it!")),f.clearColor(.8,.8,.8,1),f.clear(f.COLOR_BUFFER_BIT|f.DEPTH_BUFFER_BIT),f.enable(f.DEPTH_TEST),f.enable(f.CULL_FACE),f.frontFace(f.CCW),f.cullFace(f.BACK);let E=f.createShader(f.VERTEX_SHADER),p=f.createShader(f.FRAGMENT_SHADER);if(f.shaderSource(E,e),f.shaderSource(p,t),f.compileShader(E),!f.getShaderParameter(E,f.COMPILE_STATUS))return void console.error("ERROR failed to compile Vertex Shader",f.getShaderInfoLog(E));if(f.compileShader(p),!f.getShaderParameter(p,f.COMPILE_STATUS))return void console.error("ERROR failed to compile Fragment Shader",f.getShaderInfoLog(p));let v=f.createProgram();if(f.attachShader(v,E),f.attachShader(v,p),f.linkProgram(v),!f.getProgramParameter(v,f.LINK_STATUS))return void console.error("ERROR failed to link program!",f.getProgramInfoLog(v));if(f.validateProgram(v),!f.getProgramParameter(v,f.VALIDATE_STATUS))return void console.error("ERROR validating program!",f.getProgramInfoLog(v));let b=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,b),f.bufferData(f.ARRAY_BUFFER,new Float32Array(r),f.STATIC_DRAW);let T=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,T),f.bufferData(f.ARRAY_BUFFER,new Float32Array(a),f.STATIC_DRAW);let h=f.createBuffer();f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,h),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array(i),f.STATIC_DRAW);let S=f.createBuffer();f.bindBuffer(f.ARRAY_BUFFER,S),f.bufferData(f.ARRAY_BUFFER,new Float32Array(o),f.STATIC_DRAW),f.bindBuffer(f.ARRAY_BUFFER,b);let A=f.getAttribLocation(v,"vertPosition");f.vertexAttribPointer(A,3,f.FLOAT,f.FALSE,3*Float32Array.BYTES_PER_ELEMENT,0),f.enableVertexAttribArray(A),f.bindBuffer(f.ARRAY_BUFFER,T);let C=f.getAttribLocation(v,"vertTexCoord");f.vertexAttribPointer(C,2,f.FLOAT,f.FALSE,2*Float32Array.BYTES_PER_ELEMENT,0),f.enableVertexAttribArray(C),f.bindBuffer(f.ARRAY_BUFFER,S);let R=f.getAttribLocation(v,"vertNormal");f.vertexAttribPointer(R,3,f.FLOAT,f.TRUE,3*Float32Array.BYTES_PER_ELEMENT,0),f.enableVertexAttribArray(R),f.useProgram(v);let x=f.getUniformLocation(v,"mWorld"),F=f.getUniformLocation(v,"mView"),y=f.getUniformLocation(v,"mProj"),L=new Float32Array(16),N=new Float32Array(16),w=new Float32Array(16);mat4.identity(w),mat4.lookAt(N,[0,0,-200],[0,0,0],[0,1,0]),mat4.perspective(L,glMatrix.toRadian(45),g.clientWidth/g.clientHeight,1,2e3),f.uniformMatrix4fv(x,f.FALSE,w),f.uniformMatrix4fv(F,f.FALSE,N),f.uniformMatrix4fv(y,f.FALSE,L);let B=new Float32Array(16),_=new Float32Array(16);f.useProgram(v);var D=f.getUniformLocation(v,"ambientLightIntensity"),U=f.getUniformLocation(v,"sun.direction"),P=f.getUniformLocation(v,"sun.color");f.uniform3f(U,3,4,-2);let I=new Float32Array(16);mat4.identity(I);let q,M,G,O=0,k=0,W=0,Y=0,X=document.getElementsByClassName("FPS")[0],H=(new Date).getTime(),V=0,z=!0,j=!0,K=1,J=2,Z=1,Q=1,$=1;window.onfocus=function(){H=(new Date).getTime(),V=0};let ee=f.createTexture();f.bindTexture(f.TEXTURE_2D,ee),f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!0),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,n),f.bindTexture(f.TEXTURE_2D,null);let te=function(){g.width=g.clientWidth,g.height=g.clientHeight,f.viewport(0,0,g.clientWidth,g.clientHeight),z&&(k=performance.now()/6e3*Math.PI),1==K?(f.uniform3f(D,.2,.2,.2),f.uniform3f(P,1,1,1)):(f.uniform3f(D,1,1,1),f.uniform3f(P,0,0,0)),mat4.rotate(_,I,k,[0,1,0]),mat4.rotate(B,I,O,[1,0,0]),mat4.mul(w,_,B),f.uniformMatrix4fv(x,f.FALSE,w),f.clearColor(.8,.8,.8,1),f.clear(f.DEPTH_BUFFER_BIT|f.COLOR_BUFFER_BIT),f.bindTexture(f.TEXTURE_2D,ee),f.activeTexture(f.TEXTURE0),0==J?f.drawElements(f.TRIANGLES,i.length,f.UNSIGNED_SHORT,0):1==J?f.drawElements(f.LINES,i.length,f.UNSIGNED_SHORT,0):2==J&&f.drawElements(f.TRIANGLES,i.length,f.UNSIGNED_SHORT,0),q=(new Date).getTime(),X.innerText=parseInt(V/(q-H)*1e3),V++,requestAnimationFrame(te)};requestAnimationFrame(te);let re="#5c5c5c";document.getElementsByClassName("viewport")[0].addEventListener("mousemove",inputMoveListen=function(e){e.clientX&&1==e.buttons&&(k+=.01*(e.clientX-W)),e.clientY&&1==e.buttons&&(O-=.01*(e.clientY-Y)),W=e.clientX,Y=e.clientY,e.clientX&&2==e.buttons&&(e.target.style.cursor="move"),window.clearTimeout(G),G=setTimeout(function(){e.target.style.cursor=null},50)},!1),document.addEventListener("wheel",inputScrollListen=function(e){let t=document.getElementsByClassName("zoomSlider")[0];!e.deltaY||"viewport"!==e.target.className&&"workArea"!==e.target.className||(t.value-=.6*e.deltaY,e.deltaY<0&&(e.target.style.cursor="zoom-in"),e.deltaY>0&&(e.target.style.cursor="zoom-out"),window.clearTimeout(M),M=setTimeout(function(){e.target.style.cursor=null},200))},!1),document.addEventListener("click",inputClickListen=function(e){let t=document.getElementsByClassName("zoomSlider")[0];if("btnZoomOut"===e.target.className&&0==e.button)t.value>=0&&t.value>=10?t.value-=10:t.value=1;else if("btnZoomIn"===e.target.className&&0==e.button)t.value<=100&&t.value<=90?t.value-=-10:t.value=100;else if("btnTopView"===e.target.className&&0==e.button)m("Top view",1,re,-20,null),O=-1.6,k=0;else if("btnXview"===e.target.className&&0==e.button)m("Front view",1,re,-20,null),O=0,k=-1.6;else if("btnYview"===e.target.className&&0==e.button)m("Side view",1,re,-20,null),O=0,k=0;else if("btnViewMode"===e.target.className&&0==e.button)switch(J){case 0:e.target.value=String.fromCharCode("0xE22A"),m("Wireframe view",1,re,-20,null),J=1;break;case 1:e.target.value=String.fromCharCode("0xE3F4"),m("Textured view",1,re,-20,null),J=2;break;case 2:e.target.value=String.fromCharCode("0xE3A2"),m("Solid view",1,re,-20,null),J=0}else if("btnGrid"===e.target.className&&0==e.button)1==j?(e.target.value=String.fromCharCode("0xE3EB"),m("Grid OFF",1,re,-20,null),j=!1):0==j&&(e.target.value=String.fromCharCode("0xE3EC"),m("Grid ON",1,re,-20,null),j=!0);else if("btnSyncViewport"===e.target.className&&0==e.button)e.target.value!==String.fromCharCode("0xE628")?e.target.value=String.fromCharCode("0xE628"):e.target.value=String.fromCharCode("0xE627");else if("btnLitUnlit"===e.target.className&&0==e.button)0==K?(e.target.value=String.fromCharCode("0xE25F"),m("Set to Lit mode",1,re,-20,null),K=1):1==K&&(e.target.value=String.fromCharCode("0xE90F"),m("Set to Unlit mode",1,re,-20,null),K=0);else if("btnRotation"===e.target.className&&0==e.button)1==z?(e.target.value=String.fromCharCode("0xE036"),m("Auto 3D Rotation stopped",1,re,-20,null),z=!1):0==z&&(e.target.value=String.fromCharCode("0xE84D"),m("Auto 3D Rotation resumed",1,re,-20,null),z=!0);else if("btnClose"===e.target.className&&0==e.button)e.target.parentElement.style.visibility="hidden",e.target.parentElement.style.opacity=0;else if("btnWorkflow"===e.target.className&&0==e.button)1==Z?(Z=2,m("Swithed to: Diffuse, Specular, Glossy workflow",2,re,-20,null)):2==Z&&(Z=1,m("Swithed to: Albedo, Metallic, Roughness workflow",2,re,-20,null));else if("btnShading"===e.target.className&&0==e.button)1==$?($=2,m("Swithed to flat shading",2,re,-20,null)):2==$&&($=1,m("Swithed to smooth shading",2,re,-20,null));else if("btnBumpNormal"===e.target.className&&0==e.button)1==Q?(Q=2,m("Swithed to bump maps",2,re,-20,null)):2==Q&&(Q=1,m("Swithed to normal maps",2,re,-20,null));else if("btnHelp"===e.target.className&&0==e.button)c("Help menu","<b>Coming soon!</b>\n"+helpTextLoremIpsum,re,-20);else if("btnWarnings"===e.target.classList[0]&&0==e.button)e.target.value!==String.fromCharCode("0xE86C")?(e.target.value=String.fromCharCode("0xE86C"),e.target.classList.remove("error"),e.target.classList.add("ok")):(e.target.value=String.fromCharCode("0xE002"),e.target.classList.remove("ok"),e.target.classList.add("error")),c("Mesh validation report","<b>The list bellow is just a placeholder!</b><li>Doubles detected!</li><li>N-gon limit exceeding!</li>",re,-20);else if("btnFullScreen"===e.target.className&&0==e.button){e.target.value!==String.fromCharCode("0xE5D1")?e.target.value=String.fromCharCode("0xE5D1"):e.target.value=String.fromCharCode("0xE5D0");let t=document.getElementsByClassName("workArea")[0];if(!window.fullScreen){if(t.requestFullscreen)return void t.requestFullscreen();if(t.mozRequestFullScreen)return void t.mozRequestFullScreen();if(t.webkitRequestFullscreen)return void t.webkitRequestFullscreen();if(t.msRequestFullscreen)return void t.msRequestFullscreen()}if(window.fullScreen){if(document.exitFullscreen)return void document.exitFullscreen();if(document.mozCancelFullScreen)return void document.mozCancelFullScreen();if(document.webkitExitFullscreen)return void document.webkitExitFullscreen();if(document.msExitFullscreen)return void document.msExitFullscreen()}}},!1)}function parse3DS(){}function parseBLEND(){}function parseDAE(){}function parseOBJ(){}function parseMAX(){}function parseFBX(){}var helpTextLoremIpsum="<p>Ea paulo intellegat omittantur sit, esse liber at qui, vix cu ludus volutpat. Cibo dicit nonumes has et, his ne lorem scripta scriptorem, sea ex oblique deseruisse argumentum. Eu dolorum consequuntur quo. Nonumy omnium pri ea. </p><p>Est ex recusabo delicata, imperdiet concludaturque id est. Option conclusionemque ne mei. Ex eam accumsan inimicus. Has nominavi voluptatum complectitur ad. Libris nemore ad qui, te his probo utroque. Eu meliore admodum eum. </p><p>Cu option feugiat dolorem per, per an tale legere. Oporteat vulputate cu eos, sonet virtute no mel. Eos altera animal oporteat et, id perfecto interpretaris qui. Putent dicunt maiorum an has, et duo atqui animal eligendi. Sale tamquam pericula quo eu, nostrud intellegat an est, ea usu vitae nominati. Dicam vocent dolorem pro ut, ea per iudico minimum, an simul aperiam malorum ius. Ei pro facer tritani, quodsi accusata eu qui. </p><p>Te mel dicant scribentur theophrastus, vis falli postulant constituam ad. Cum eu mnesarchum instructior. Malis putent petentium pro in, an est senserit elaboraret intellegebat, mei in mollis mediocritatem. Ad eum illud fugit. In suas homero nemore his. </p><p>Pro illum aliquip in, pri et affert iracundia. Simul melius nostrum eum ei, simul nostro invidunt qui in, ei omnium latine omittam duo. Pri an dicant lucilius aliquando, brute feugait adolescens pri eu, vel cu fabulas pertinacia. Mea noster delectus dignissim et, est ea illum intellegat. Epicurei philosophia id vim. </p><p>Oratio insolens ullamcorper ex has, ad ius solet ignota reprehendunt. Duo petentium erroribus at, quem nostrum ad his. Nam omnis posidonium ne, partem vocibus pri an, ius no nominati gubergren. Verear recteque philosophia ius cu, ad oblique propriae vel. </p><p>Vel dolor legendos salutandi et, vitae primis inimicus sed an. Ad sed omnis iracundia, facer nonumy saperet eu nec. Cu signiferumque mediocritatem vix. Vis id erant possim. In pro quidam labores. Ei sit oblique atomorum honestatis, quo mazim delicata cu, cu nibh graeci facilisi duo. </p><p>Ei vix magna malorum nominati. Hinc indoctum repudiare cu vix. Graeco vocent deseruisse nam eu. Ea cum suscipit elaboraret. At nulla tincidunt pri. </p><p>Ex pro consul sanctus, ea ullum ancillae facilisis pri. Ex pro quaeque honestatis, eam ad zril dictas, mei ponderum disputando id. Liber adversarium est te. Cibo impetus reprimique no quo, id eos viderer honestatis. Amet platonem consulatu ei cum, omnis assum eu est, vel cu suscipit facilisi. </p><p>Sea congue denique no, persius scaevola vel ne. Ut sit eius illum accusam, at volutpat abhorreant scriptorem per. Periculis theophrastus nec te, eam id commune omnesque, ius at mutat volumus nostrum. Vim stet impetus instructior ea, mei ea viderer torquatos. Et vero dicat timeam vis.</p>";